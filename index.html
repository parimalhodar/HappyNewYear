<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Diwali Wishes</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0a0015 0%, #1a0033 50%, #2d0052 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }

        .fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 20px;
            max-width: 600px;
            width: 90%;
            pointer-events: none;
        }

        .container > * {
            pointer-events: auto;
        }

        .diya-container {
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
        }

        .diya {
            font-size: 80px;
            filter: drop-shadow(0 0 20px #ffa500);
            animation: flicker 2s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; filter: drop-shadow(0 0 20px #ffa500); }
            50% { opacity: 0.8; filter: drop-shadow(0 0 30px #ff8c00); }
        }

        .greeting-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 8px 32px rgba(255, 165, 0, 0.3);
            border: 2px solid rgba(255, 165, 0, 0.3);
            animation: slideIn 1s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .title {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            color: #ffd700;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
            50% { text-shadow: 0 0 30px rgba(255, 215, 0, 1); }
        }

        .subtitle {
            font-size: 20px;
            color: #fff;
            margin-bottom: 25px;
            font-weight: 300;
        }

        .message {
            font-size: 16px;
            color: #ffe4b5;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .sender-name {
            font-size: 24px;
            color: #ffb347;
            font-weight: 600;
            margin-top: 20px;
            text-shadow: 0 0 10px rgba(255, 179, 71, 0.5);
        }

        .share-btn {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 25px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.6);
        }

        .share-btn:active {
            transform: translateY(-1px);
        }

        .whatsapp-icon {
            font-size: 24px;
        }

        .decorative-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: #ffd700;
            border-radius: 50%;
            animation: pulse 1.5s ease-in-out infinite;
        }

        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.7; }
        }

        @media (max-width: 600px) {
            .title { font-size: 36px; }
            .subtitle { font-size: 18px; }
            .message { font-size: 14px; }
            .sender-name { font-size: 20px; }
            .greeting-card { padding: 30px 20px; }
        }

        .name-input-container {
            margin-top: 20px;
            display: none;
        }

        .name-input {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 10px;
            padding: 12px 20px;
            color: white;
            font-size: 16px;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .name-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .create-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            color: #2d0052;
            border: none;
            padding: 12px 35px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .create-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.6);
        }

        .tap-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            z-index: 10;
            animation: bounce 2s ease-in-out infinite;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
    </style>
</head>
<body>
    <canvas class="fireworks-canvas" id="fireworks"></canvas>
    
    <div class="tap-hint">ðŸ‘† Tap anywhere to light crackers! ðŸŽ†</div>

    <div class="container">
        <div class="diya-container">
            <div class="diya">ðŸª”</div>
        </div>

        <div class="greeting-card">
            <h1 class="title">Happy Diwali!</h1>
            
            <div class="decorative-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>

            <p class="subtitle">âœ¨ Festival of Lights âœ¨</p>
            
            <p class="message">
                May this Diwali bring joy, prosperity, and happiness to your life. 
                May the divine light of diyas brighten your days and illuminate your path to success.
                Wishing you and your family a blessed and prosperous Diwali! ðŸŽ†
            </p>

            <div class="decorative-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>

            <div id="senderDisplay">
                <p class="sender-name">~ <span id="senderName">Your Friend</span> ðŸ’«</p>
            </div>

            <div class="name-input-container" id="nameInputContainer">
                <input type="text" class="name-input" id="nameInput" placeholder="Enter your name">
                <br>
                <button class="create-btn" onclick="createPersonalizedLink()">Create My Wish</button>
            </div>

            <button class="share-btn" onclick="shareOnWhatsApp()">
                <span class="whatsapp-icon">ðŸ“±</span>
                Share on WhatsApp
            </button>
        </div>
    </div>

    <script>
        // Get sender name from URL
        function getSenderName() {
            const urlParams = new URLSearchParams(window.location.search);
            const name = urlParams.get('from');
            return name ? decodeURIComponent(name) : null;
        }

        // Initialize page
        function initializePage() {
            const senderName = getSenderName();
            if (senderName) {
                document.getElementById('senderName').textContent = senderName;
                document.getElementById('senderDisplay').style.display = 'block';
                document.getElementById('nameInputContainer').style.display = 'none';
            } else {
                document.getElementById('senderDisplay').style.display = 'none';
                document.getElementById('nameInputContainer').style.display = 'block';
            }
        }

        // Create personalized link
        function createPersonalizedLink() {
            const name = document.getElementById('nameInput').value.trim();
            if (name) {
                const baseUrl = window.location.origin + window.location.pathname;
                const personalizedUrl = `${baseUrl}?from=${encodeURIComponent(name)}`;
                window.location.href = personalizedUrl;
            } else {
                alert('Please enter your name!');
            }
        }

        // Share on WhatsApp
        function shareOnWhatsApp() {
            const senderName = getSenderName();
            let message, url;
            
            if (senderName) {
                message = `ðŸª” *Happy Diwali! & Happy New Year* ðŸŽ†\n\nMay this Diwali bring joy, prosperity, and happiness to your life. May the divine light of diyas brighten your days and illuminate your path to success. Wishing you and your family a blessed and prosperous Diwali!\nFrom :"${senderName}" âœ¨\n\nðŸŽ‡ Tap the screen to light up crackers!\n\nView the animated greeting card here:\n`;
                url = window.location.href;
            } else {
                const name = document.getElementById('nameInput').value.trim();
                if (!name) {
                    alert('Please enter your name first to create a personalized wish!');
                    return;
                }
                const baseUrl = window.location.origin + window.location.pathname;
                url = `${baseUrl}?from=${encodeURIComponent(name)}`;
                message = `ðŸª” *Happy Diwali! & Happy New Year* ðŸŽ†\n\nMay this Diwali bring joy, prosperity, and happiness to your life. May the divine light of diyas brighten your days and illuminate your path to success. Wishing you and your family a blessed and prosperous Diwali!\nFrom :"${name}" âœ¨\n\nðŸŽ‡ Tap the screen to light up crackers!\n\nView the animated greeting card here:\n`;
            }
            
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message + url)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Fireworks Animation
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        class Particle {
            constructor(x, y, color, speed = 1) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = {
                    x: (Math.random() - 0.5) * 10 * speed,
                    y: (Math.random() - 0.5) * 10 * speed
                };
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.015;
                this.radius = Math.random() * 3 + 1;
                this.gravity = 0.15;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                
                // Draw glow
                const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius * 3);
                gradient.addColorStop(0, this.color);
                gradient.addColorStop(1, 'transparent');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius * 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw particle
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.restore();
            }

            update() {
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= this.decay;
            }
        }

        class Spark {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3 + 2;
                this.velocity = {
                    x: Math.cos(angle) * speed,
                    y: Math.sin(angle) * speed
                };
                this.alpha = 1;
                this.decay = 0.02;
                this.length = Math.random() * 20 + 10;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x - this.velocity.x * 2, this.y - this.velocity.y * 2);
                ctx.stroke();
                ctx.restore();
            }

            update() {
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.velocity.y += 0.2;
                this.alpha -= this.decay;
            }
        }

        let particles = [];
        let sparks = [];
        const colors = ['#ffd700', '#ffb347', '#ff6347', '#ff1493', '#00ffff', '#00ff00', '#ffffff', '#ff69b4'];

        function createFirework(x, y, intensity = 1) {
            const color = colors[Math.floor(Math.random() * colors.length)];
            const particleCount = 50 * intensity;
            
            // Create burst particles
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle(x, y, color, intensity));
            }
            
            // Create sparks
            for (let i = 0; i < 15 * intensity; i++) {
                sparks.push(new Spark(x, y, color));
            }
        }

        function animate() {
            ctx.fillStyle = 'rgba(10, 0, 21, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                const particle = particles[i];
                if (particle.alpha <= 0) {
                    particles.splice(i, 1);
                } else {
                    particle.update();
                    particle.draw();
                }
            }

            // Update and draw sparks
            for (let i = sparks.length - 1; i >= 0; i--) {
                const spark = sparks[i];
                if (spark.alpha <= 0) {
                    sparks.splice(i, 1);
                } else {
                    spark.update();
                    spark.draw();
                }
            }

            requestAnimationFrame(animate);
        }

        // Handle clicks and touches
        let lastFireworkTime = 0;
        const minFireworkInterval = 100;

        function handleInteraction(e) {
            e.preventDefault();
            const now = Date.now();
            
            if (now - lastFireworkTime < minFireworkInterval) return;
            lastFireworkTime = now;

            let x, y;
            if (e.type.startsWith('touch')) {
                const touch = e.touches[0] || e.changedTouches[0];
                x = touch.clientX;
                y = touch.clientY;
            } else {
                x = e.clientX;
                y = e.clientY;
            }

            createFirework(x, y, 1.5);
        }

        canvas.addEventListener('click', handleInteraction);
        canvas.addEventListener('touchstart', handleInteraction);
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (e.touches.length > 0) {
                handleInteraction(e);
            }
        });

        // Start animation
        animate();

        // Initialize page on load
        initializePage();

        // Hide tap hint after first interaction
        let hintHidden = false;
        function hideHint() {
            if (!hintHidden) {
                document.querySelector('.tap-hint').style.display = 'none';
                hintHidden = true;
            }
        }

        canvas.addEventListener('click', hideHint, { once: true });
        canvas.addEventListener('touchstart', hideHint, { once: true });
    </script>
</body>
</html>
